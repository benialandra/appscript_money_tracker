<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    /* VARIABLES */
    :root {
      --primary-color: #009d63;
      --secondary-color: #2c3e50;
      --bg-light: #f4f6f9;
      --text-dark: #333;
      --card-bg: #ffffff;
      --bg-hover: #f8f9fa;
      --border-color: #dee2e6;
    }

    body {
      background-color: var(--bg-light);
      color: var(--text-dark);
      font-family: 'Montserrat', sans-serif;
      overflow-x: hidden;
      transition: 0.3s;
    }

    .fw-bold {
      font-weight: 700 !important;
    }

    div.swal2-container {
      z-index: 20000 !important;
    }

    /* Opsional: Agar loading spinner juga paling depan */
    #loader {
      z-index: 20001 !important;
    }

    .card,
    .list-group-item,
    .bg-white {
      background-color: var(--card-bg) !important;
      transition: 0.3s;
      border-radius: 12px;
    }

    /* ANIMASI */
    .hover-card {
      transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), border-color 0.3s ease;
      cursor: pointer;
    }

    .hover-card:hover {
      transform: translateY(-6px);
      border: 1px solid var(--primary-color) !important;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1) !important;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-entry {
      animation: fadeInUp 0.5s ease-out forwards;
      opacity: 0;
    }

    /* RESPONSIVE */
    .responsive-icon {
      font-size: 3rem !important;
      opacity: 0.25;
      transition: 0.3s;
    }

    .responsive-saldo {
      font-size: 1.75rem !important;
    }

    .responsive-label {
      font-size: 1rem !important;
    }

    @media (max-width: 768px) {
      .responsive-icon {
        font-size: 2rem !important;
      }

      .responsive-saldo {
        font-size: 1.25rem !important;
      }

      .responsive-label {
        font-size: 0.8rem !important;
      }

      .card-body-mobile {
        padding: 1.2rem !important;
      }
    }

    /* =========================================
       DARK MODE CONFIGURATION (KOMBO MAUT)
       ========================================= */
    body.dark-mode {
      --bg-light: #121212;
      --text-dark: #e0e0e0;
      /* Putih Tulang */
      --card-bg: #1e1e1e;
      --bg-hover: #2c2c2c;
      --border-color: #333;
    }

    body.dark-mode h1,
    body.dark-mode h2,
    body.dark-mode h3,
    body.dark-mode h4,
    body.dark-mode h5,
    body.dark-mode h6,
    body.dark-mode p,
    body.dark-mode label,
    body.dark-mode span,
    body.dark-mode div,
    body.dark-mode li {
      color: #e0e0e0 !important;
    }

    /* === TABLE FIX (YANG BENAR & TAJAM) === */
    body.dark-mode .table {
      color: #e0e0e0 !important;
      background-color: transparent !important;
    }

    body.dark-mode .table th {
      color: #ffffff !important;
      background-color: #2c2c2c !important;
      border-color: #444 !important;
      font-weight: 600 !important;
      text-shadow: none !important;
      /* HAPUS BLUR */
    }

    body.dark-mode .table td {
      color: #dddddd !important;
      background-color: transparent !important;
      border-color: #333 !important;
      font-weight: 400 !important;
      text-shadow: none !important;
      /* HAPUS BLUR */
    }

    body.dark-mode .table-hover tbody tr:hover>* {
      background-color: #333333 !important;
      color: #ffffff !important;
    }

    body.dark-mode .table .text-muted {
      color: #999999 !important;
    }

    /* === ALERT FIX (YANG BIRU NEON) === */
    body.dark-mode .alert-info {
      background-color: rgba(13, 202, 240, 0.15) !important;
      color: #0dcaf0 !important;
      border: 1px solid rgba(13, 202, 240, 0.3) !important;
    }

    body.dark-mode .alert-info i {
      color: #0dcaf0 !important;
    }

    /* COMPONENTS & BADGE */
    body.dark-mode .badge.bg-success.bg-opacity-10 {
      background-color: #145a32 !important;
      color: #82e0aa !important;
    }

    body.dark-mode .badge.bg-danger.bg-opacity-10 {
      background-color: #641e16 !important;
      color: #f1948a !important;
    }

    body.dark-mode .badge.bg-primary.bg-opacity-10 {
      background-color: #154360 !important;
      color: #85c1e9 !important;
    }

    body.dark-mode .badge.bg-warning {
      background-color: #7d6608 !important;
      color: #f7dc6f !important;
    }

    body.dark-mode .badge.bg-success {
      background-color: #27ae60 !important;
      color: #fff !important;
    }

    body.dark-mode .border-bottom {
      border-color: #333 !important;
    }

    body.dark-mode .form-control,
    body.dark-mode .form-select {
      background-color: #2d2d2d;
      border: 1px solid #444;
      color: #fff;
    }

    body.dark-mode .form-control::placeholder {
      color: #888;
    }

    body.dark-mode #pageTitle {
      color: #ffffff !important;
    }

    body.dark-mode .text-dark {
      color: #ffffff !important;
    }

    body.dark-mode .navbar-light .navbar-brand,
    body.dark-mode .navbar-light .navbar-nav .nav-link {
      color: #ffffff !important;
    }

    body.dark-mode div.swal2-popup {
      background: #2d2d2d !important;
      color: #ffffff !important;
    }

    body.dark-mode div.swal2-title {
      color: #ffffff !important;
    }

    body.dark-mode div.swal2-html-container {
      color: #ccc !important;
    }

    body.dark-mode .swal2-select {
      background-color: #1e1e1e !important;
      color: #fff !important;
      border-color: #555 !important;
    }

    /* LAYOUT */
    #wrapper {
      display: flex;
      width: 100%;
    }

    #sidebar-wrapper {
      min-width: 250px;
      max-width: 250px;
      min-height: 100vh;
      background-color: var(--secondary-color);
      color: #fff;
      transition: margin 0.25s ease-out;
    }

    #sidebar-wrapper .list-group-item {
      background-color: transparent !important;
      color: rgba(255, 255, 255, 0.7) !important;
      border: none;
      cursor: pointer;
      padding: 15px 25px;
      font-weight: 500;
    }

    #sidebar-wrapper .list-group-item:hover,
    #sidebar-wrapper .list-group-item.active {
      background-color: rgba(255, 255, 255, 0.1) !important;
      color: #fff !important;
      border-left: 4px solid #fff;
    }

    #page-content-wrapper {
      width: 100%;
    }

    #wrapper.toggled #sidebar-wrapper {
      margin-left: -250px;
    }

    @media (max-width: 768px) {
      #sidebar-wrapper {
        margin-left: -250px;
      }

      #wrapper.toggled #sidebar-wrapper {
        margin-left: 0;
      }
    }

    /* LOGIN STYLES */
    #login-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #009d63 0%, #006e45 100%);
    }

    .login-card {
      width: 100%;
      max-width: 400px;
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
    }
  </style>
</head>

<body>
  <div id="app-container" style="display:none;">
    <div class="d-flex" id="wrapper">

      <div id="sidebar-wrapper">
        <div class="sidebar-heading text-center py-4" onclick="switchPage('dashboard', null)"
          style="cursor: pointer; transition: 0.3s;" onmouseover="this.style.opacity='0.8'"
          onmouseout="this.style.opacity='1'">

          <i class="fas fa-wallet fa-3x mb-2 text-white"></i>
          <h4 class="fw-bold m-0 text-white">Isi Dompet</h4>

        </div>
        <div class="list-group list-group-flush my-3">
          <a class="list-group-item active" onclick="switchPage('dashboard', this)"><i
              class="fas fa-home me-3"></i>Dashboard</a>
          <a class="list-group-item" onclick="switchPage('budget', this)"><i
              class="fas fa-bullseye me-3"></i>Rencana</a>
          <a class="list-group-item" onclick="switchPage('saldo', this)"><i class="fas fa-university me-3"></i>Saldo
            Akun</a>
          <a class="list-group-item" onclick="switchPage('asset', this)"><i
              class="fas fa-chart-pie me-3"></i>Portfolio</a>
          <a class="list-group-item" onclick="switchPage('input', this)"><i class="fas fa-plus-circle me-3"></i>Input
            Data</a>
          <a class="list-group-item" onclick="switchPage('report', this)"><i
              class="fas fa-file-invoice me-3"></i>Laporan</a>
          <a class="list-group-item" onclick="switchPage('profile', this)"><i
              class="fas fa-user-cog me-3"></i>Profile</a>
          <a class="list-group-item text-warning mt-4" onclick="doLogout()"><i
              class="fas fa-sign-out-alt me-3"></i>Logout</a>
        </div>
      </div>

      <div id="page-content-wrapper">
        <nav class="navbar navbar-expand-lg navbar-light bg-transparent py-4 px-4 border-bottom">
          <div class="d-flex align-items-center w-100 justify-content-between">
            <div class="d-flex align-items-center">
              <button class="btn btn-primary me-3" id="menu-toggle"><i class="fas fa-bars"></i></button>
              <h2 class="fs-4 m-0 fw-bold" id="pageTitle">Dashboard</h2>
            </div>
            <div class="d-flex gap-2">
              <button
                class="btn btn-secondary rounded-circle shadow-sm d-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px; padding: 0;" onclick="toggleTheme()">
                <i id="themeIcon" class="fas fa-moon"></i>
              </button>

              <button class="btn btn-light rounded-circle shadow-sm d-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px; padding: 0;" onclick="refreshData()">
                <i class="fas fa-sync-alt text-primary"></i>
              </button>
            </div>
          </div>
        </nav>

        <div class="container-fluid px-4 py-4">

          <!-- <div id="loader"
            style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.8); z-index:9999; justify-content:center; align-items:center;">
            <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>
          </div> -->

          <div id="page-dashboard" class="page-section">
            <div class="row g-3 mb-4">
              <div class="col-md-4 col-sm-12">
                <div
                  class="p-4 bg-white shadow-sm d-flex justify-content-between align-items-center rounded h-100 hover-card card-body-mobile">
                  <div>
                    <h3 class="fw-bold responsive-saldo" id="dashTotalSaldo">Rp 0</h3>
                    <p class="text-muted mb-0 fw-bold responsive-label">Sisa Uang Bebas</p>
                  </div><i class="fas fa-wallet text-primary responsive-icon"></i>
                </div>
              </div>
              <div class="col-md-4 col-sm-12">
                <div
                  class="p-4 bg-white shadow-sm d-flex justify-content-between align-items-center rounded h-100 hover-card card-body-mobile">
                  <div>
                    <h3 class="fw-bold responsive-saldo" id="dashLiquid">Rp 0</h3>
                    <p class="text-muted mb-0 fw-bold responsive-label">Pos Rencana</p>
                  </div><i class="fas fa-piggy-bank text-success responsive-icon"></i>
                </div>
              </div>
              <div class="col-md-4 col-sm-12">
                <div
                  class="p-4 bg-white shadow-sm d-flex justify-content-between align-items-center rounded h-100 hover-card card-body-mobile"
                  onclick="showInvestDetails()">
                  <div>
                    <h3 class="fw-bold responsive-saldo" id="dashInvest">Rp 0</h3>
                    <p class="text-muted mb-0 fw-bold responsive-label">Investasi
                      <i class="fas fa-info-circle small ms-1"></i>
                    </p>
                  </div><i class="fas fa-chart-line text-warning responsive-icon"></i>
                </div>
              </div>
            </div>
            <div class="row mb-4">
              <div class="col-lg-8 mb-4 mb-lg-0">
                <div class="card shadow-sm border-0 h-100">
                  <div class="card-body">
                    <h5 class="fw-bold text-muted mb-3"><i class="fas fa-chart-line me-2"></i>Tren Sisa Uang Bebas</h5>
                    <div style="height:300px; position:relative;"><canvas id="chartLineHistory"></canvas></div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="card shadow-sm border-0 h-100">
                  <div class="card-body d-flex flex-column">
                    <h5 class="fw-bold text-muted mb-3">Pemasukan vs Pengeluaran</h5>
                    <div style="flex-grow: 1; min-height:250px; position:relative;"><canvas
                        id="chartDashboard"></canvas></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="card shadow-sm border-0">
                  <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                      <h5 class="fw-bold text-muted m-0"><i class="fas fa-history me-2"></i>Riwayat Transaksi Terakhir
                      </h5>
                      <button class="btn btn-sm btn-outline-primary rounded-pill"
                        onclick="switchPage('report', null)">Lihat Semua</button>
                    </div>
                    <div class="table-responsive">
                      <table class="table table-hover align-middle small mb-0">
                        <thead class="bg-light">
                          <tr>
                            <th width="5%">NO</th>
                            <th>Tanggal</th>
                            <th>Keterangan</th>
                            <th class="text-end">Nominal</th>
                          </tr>
                        </thead>
                        <tbody id="tblDashboardMutasi">
                          <tr>
                            <td colspan="4" class="text-center text-muted py-3">Memuat data...</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="page-budget" class="page-section" style="display:none;">
            <div class="row">
              <div class="col-12">
                <div class="card shadow-sm border-0">
                  <div class="card-body">
                    <h4 class="fw-bold mb-3">Rencana Anggaran</h4>
                    <div class="table-responsive">
                      <table class="table table-hover align-middle mb-0">
                        <thead class="bg-light">
                          <tr>
                            <th width="5%">NO</th>
                            <th>Nama</th>
                            <th>Tanggal</th>
                            <th>Nominal</th>
                            <th>Status</th>
                            <th>Aksi</th>
                          </tr>
                        </thead>
                        <tbody id="tblPlans"></tbody>
                      </table>
                      <div id="emptyPlanMsg" class="text-center p-4 text-muted" style="display:none">Belum ada rencana
                        aktif.</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="page-saldo" class="page-section" style="display:none;">

            <div class="d-flex justify-content-between align-items-center mb-4">
              <h4 class="fw-bold m-0">Menu Saldo</h4>
              <button class="btn btn-primary rounded-pill btn-sm" onclick="showAddAccountModal()">
                <i class="fas fa-plus me-1"></i>Akun Baru
              </button>
            </div>

            <div class="row g-3 mb-4">
              <div class="col-md-4 col-sm-12">
                <div
                  class="p-3 bg-white shadow-sm d-flex justify-content-between align-items-center rounded border-start border-5 border-primary">
                  <div>
                    <p class="text-muted small fw-bold mb-1">TOTAL KEKAYAAN</p>
                    <h4 class="fw-bold text-dark m-0" id="statTotalAll">Rp 0</h4>
                  </div>
                  <i class="fas fa-coins fa-2x text-primary opacity-25"></i>
                </div>
              </div>
              <div class="col-md-4 col-sm-12">
                <div
                  class="p-3 bg-white shadow-sm d-flex justify-content-between align-items-center rounded border-start border-5 border-success">
                  <div>
                    <p class="text-muted small fw-bold mb-1">TOTAL DI BANK</p>
                    <h4 class="fw-bold text-dark m-0" id="statTotalBank">Rp 0</h4>
                  </div>
                  <i class="fas fa-university fa-2x text-success opacity-25"></i>
                </div>
              </div>
              <div class="col-md-4 col-sm-12">
                <div
                  class="p-3 bg-white shadow-sm d-flex justify-content-between align-items-center rounded border-start border-5 border-warning">
                  <div>
                    <p class="text-muted small fw-bold mb-1">E-WALLET & TUNAI</p>
                    <h4 class="fw-bold text-dark m-0" id="statTotalWallet">Rp 0</h4>
                  </div>
                  <i class="fas fa-wallet fa-2x text-warning opacity-25"></i>
                </div>
              </div>
            </div>

            <div class="card shadow-sm border-0 mb-4 bg-white">
              <div class="card-body">
                <h6 class="fw-bold mb-3 text-muted"><i class="fas fa-edit me-2"></i>Koreksi Saldo Manual</h6>
                <form onsubmit="handleUpdateSaldo(event)" class="row g-2 align-items-end">
                  <div class="col-md-5">
                    <label class="small text-muted fw-bold">Pilih Akun</label><select id="updateAkunSel"
                      class="form-select"></select>
                  </div>
                  <div class="col-md-5"><label class="small text-muted fw-bold">Saldo (Rp)</label><input
                      id="updateNominal" class="form-control fw-bold text-primary" placeholder="0"
                      onkeyup="formatRupiahTyping(this)" required>
                  </div>
                  <div class="col-md-2">
                    <button type="submit" class="btn btn-warning w-100 fw-bold"><i
                        class="fas fa-save me-1"></i>Update</button>
                  </div>
                </form>
              </div>
            </div>

            <h6 class="text-muted fw-bold text-uppercase ls-1">Bank</h6>
            <div class="row" id="container-bank"></div>
            <h6 class="text-muted fw-bold text-uppercase ls-1 mt-4">E-Wallet & Tunai</h6>
            <div class="row" id="container-wallet"></div>
          </div>

          <div id="page-asset" class="page-section" style="display:none;">
            <div class="row mb-4">
              <div class="col-lg-8 mb-4 mb-lg-0">
                <div class="card shadow-sm border-0 h-100">
                  <div class="card-body">
                    <h5 class="fw-bold text-muted mb-3"><i class="fas fa-chart-line me-2"></i>Pertumbuhan Aset (30 Hari)
                    </h5>
                    <div style="height:300px; position:relative;"><canvas id="chartAssetTrend"></canvas></div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="card shadow-sm border-0 h-100">
                  <div class="card-body d-flex flex-column">
                    <h5 class="fw-bold text-muted mb-3">Alokasi Aset</h5>
                    <div style="flex-grow: 1; min-height:250px; position:relative;"><canvas
                        id="chartAssetDoughnut"></canvas></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card border-0 shadow-sm">
              <div class="card-body">
                <h4 class="fw-bold mb-3">Rincian Portfolio</h4>
                <table class="table table-hover align-middle">
                  <thead class="bg-light">
                    <tr>
                      <th width="5%">NO</th>
                      <th>Nama Aset</th>
                      <th class="text-end">Nilai (Rp)</th>
                    </tr>
                  </thead>
                  <tbody id="tbodyAsset"></tbody>
                </table>
              </div>
            </div>
          </div>

          <div id="page-input" class="page-section" style="display:none;">
            <div class="row justify-content-center">
              <div class="col-md-8">
                <div class="card shadow-sm border-0">
                  <div class="card-body p-4">
                    <h4 class="mb-4 text-center text-primary fw-bold">Input Data Baru</h4>
                    <ul class="nav nav-pills nav-fill mb-4 p-1 bg-light rounded-pill">
                      <li class="nav-item"><a class="nav-link active rounded-pill fw-bold" id="tab-transaksi"
                          onclick="setMode('transaksi')" style="cursor:pointer;">Transaksi</a></li>
                      <li class="nav-item"><a class="nav-link rounded-pill fw-bold" id="tab-transfer"
                          onclick="setMode('transfer')" style="cursor:pointer;">Transfer</a></li>
                      <li class="nav-item"><a class="nav-link rounded-pill fw-bold" id="tab-budget"
                          onclick="setMode('budget')" style="cursor:pointer;">Rencana</a></li>
                    </ul>
                    <form id="formInput" onsubmit="handleSimpan(event)"><input type="hidden" id="inputMode" name="mode"
                        value="transaksi">
                      <div class="mb-3"><label class="small fw-bold text-muted">TANGGAL</label><input type="date"
                          name="tanggal" class="form-control form-control-lg" required>
                      </div>
                      <div id="block-transaksi">
                        <div class="row mb-3">
                          <div class="col">
                            <label class="small fw-bold text-muted">TIPE</label><select name="tipe" id="tipeSel"
                              class="form-select form-select-lg" onchange="updateKat()">
                              <option value="Expense">Pengeluaran</option>
                              <option value="Income">Pemasukan</option>
                            </select>
                          </div>
                          <div class="col">
                            <label class="small fw-bold text-muted">KATEGORI</label><select name="kategori" id="katSel"
                              class="form-select form-select-lg"></select>
                          </div>
                        </div>
                        <div class="mb-3">
                          <label class="small fw-bold text-muted">SUMBER DANA</label><select name="sumber"
                            id="sumberSel" class="form-select form-select-lg"></select>
                        </div>
                      </div>
                      <div id="block-transfer" style="display:none;">
                        <div class="row mb-3">
                          <div class="col">
                            <label class="text-danger small fw-bold">DARI</label><select name="sumber_tf"
                              id="sumberTfSel" class="form-select form-select-lg"></select>
                          </div>
                          <div class="col-1 d-flex align-items-center justify-content-center pt-4">
                            <i class="fas fa-arrow-right text-muted"></i>
                          </div>
                          <div class="col">
                            <label class="text-success small fw-bold">KE</label><select name="tujuan_tf"
                              id="tujuanTfSel" class="form-select form-select-lg"></select>
                          </div>
                        </div>
                      </div>
                      <div id="block-budget" style="display:none;">
                        <div class="alert alert-info py-2 px-3 small border-0 mb-3">
                          <i class="fas fa-info-circle me-1"></i> Catat rencana/target baru.
                        </div>
                        <div class="mb-3"><label class="small fw-bold text-muted">NAMA RENCANA</label><input type="text"
                            id="budgetNama" class="form-control form-control-lg" placeholder="Contoh: Service Mobil">
                        </div>
                      </div>
                      <div class="mb-3"><label class="small fw-bold text-muted">NOMINAL (Rp)</label><input type="text"
                          id="inputJumlah" name="jumlah" class="form-control form-control-lg fw-bold text-primary"
                          placeholder="0" onkeyup="formatRupiahTyping(this)" required>
                      </div>
                      <div class="mb-3"><label class="small fw-bold text-muted">KETERANGAN</label><input type="text"
                          id="inputKet" name="keterangan" placeholder="Isi Keterangan"
                          class="form-control form-control-lg" oninput="this.value = this.value.toUpperCase()" required>
                      </div>
                      <div class="d-grid gap-2 mt-4">
                        <button type="submit" class="btn btn-primary btn-lg rounded-pill" id="btnSimpan">Simpan
                          Data</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="page-report" class="page-section" style="display:none;">
            <div class="card shadow-sm border-0">
              <div class="card-body">
                <div class="row mb-4">
                  <div class="col-lg-8 mb-4 mb-lg-0">
                    <div class="card shadow-sm border-0 h-100">
                      <div class="card-body">
                        <h5 class="fw-bold text-muted mb-3"><i class="fas fa-chart-area me-2"></i>Tren Pemasukan vs
                          Pengeluaran</h5>
                        <div style="height: 300px; position: relative;">
                          <canvas id="chartReportLine"></canvas>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-4">
                    <div class="card shadow-sm border-0 h-100">
                      <div class="card-body d-flex flex-column">
                        <h5 class="fw-bold text-muted mb-3"><i class="fas fa-chart-pie me-2"></i>Top Kategori
                          Pengeluaran</h5>
                        <div style="flex-grow: 1; min-height: 250px; position: relative;">
                          <canvas id="chartReportCategory"></canvas>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="d-flex justify-content-between align-items-center mb-3">
                  <h4 class="fw-bold m-0"><i class="fas fa-file-invoice me-2"></i>Laporan Mutasi</h4>
                  <div>
                    <button class="btn btn-success rounded-circle shadow-sm me-2" onclick="downloadExcel()"
                      title="Download Excel">
                      <i class="fas fa-file-excel"></i>
                    </button>
                  </div>
                </div>

                <div class="card bg-light border-0 mb-3">
                  <div class="card-body p-3"><label class="small fw-bold text-muted mb-2">FILTER TANGGAL</label>
                    <div class="row g-2">
                      <div class="col-5"><input type="date" id="filterStart" class="form-control form-control-sm"></div>
                      <div class="col-5"><input type="date" id="filterEnd" class="form-control form-control-sm"></div>
                      <div class="col-2 d-grid">
                        <button class="btn btn-primary btn-sm" onclick="handleFilterReport()"><i
                            class="fas fa-search"></i></button>
                      </div>
                    </div>
                    <div class="mt-2 text-end">
                      <span class="text-muted small" style="cursor: pointer; text-decoration: underline;"
                        onclick="resetFilterReport()"><i class="fas fa-sync me-1"></i>Reset Filter</span>
                    </div>
                  </div>
                </div>
                <div class="table-responsive">
                  <table class="table table-hover align-middle">
                    <thead class="bg-light">
                      <tr>
                        <th width="5%">NO</th>
                        <th>Tanggal</th>
                        <th>Tipe</th>
                        <th>Kategori</th>
                        <th>Ket</th>
                        <th>Akun</th>
                        <th class="text-end">Nominal</th>
                      </tr>
                    </thead>
                    <tbody id="tblReportBody"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <div id="page-profile" class="page-section" style="display:none;">
            <div class="card border-0 shadow-sm rounded-4 mx-auto p-4" style="max-width:500px">
              <h4 class="fw-bold text-center mb-4">Ganti Password</h4>
              <form onsubmit="handleUpdateProfile(event)">
                <div class="mb-3"><label class="small fw-bold text-muted">Username (Tetap)</label><input id="oldUser"
                    class="form-control form-control-lg bg-light" readonly>
                </div>
                <div class="mb-3"><label class="small fw-bold text-muted">Password Lama</label><input type="password"
                    name="oldPass" placeholder="Isi Password Lama" class="form-control form-control-lg" required>
                </div>
                <hr class="my-4">
                <div class="mb-3"><label class="small fw-bold text-muted">Password Baru</label><input type="password"
                    name="newPass" placeholder="Isi Password Baru" class="form-control form-control-lg" required>
                </div><button class="btn btn-primary w-100 rounded-pill btn-lg mt-3">Simpan Perubahan</button>
              </form>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- <?!= include('JavaScript'); ?> -->

</body>

</html>